// Generated by CoffeeScript 1.4.0
(function() {
  var redirect;

  redirect = function(link) {
    return window.location = link;
  };

  window.action = function(link, event, callback) {
    event.preventDefault();
    return $.ajax({
      url: link.attr('href')
    }).done(function(result) {
      var alert;
      if (Object.prototype.toString.call(result) !== '[object Object]') {
        result = JSON.parse(result);
      }
      if (result.message) {
        if (result.message.search('alert-') === -1) {
          alert = result.state ? 'success' : 'error';
          result.message = '<div class="alert alert-' + alert + '">' + result.message + '</div>';
        }
        $('#content form, #content table').prepend(result.message);
      }
      return callback(result);
    });
  };

}).call(this);
